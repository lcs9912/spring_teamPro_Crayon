<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.sample1.mapper.ProductMapper">
	<!-- 상품등록 -->
	<insert id="insertProduct" parameterType="hashmap">
		INSERT INTO T1_PRODUCT_UPDATE
			(PRODUCT_MODEL, PRODUCT_NAME, PRODUCT_SIZE, PRODUCT_PRICE, PRODUCT_COLOR,
				PRODUCT_LAUNCH_PRICE, PRODUCT_CATEGORIE1, PRODUCT_CATEGORIE2,PRODUCT_BRAND)
		VALUES
			(#{pModel}, #{pName}, #{pSize}, #{pPrice}, #{pColor}, #{launch}, #{pCategorie1}, #{pCategorie2}, #{brand})
	</insert>
	
	<!-- 상품이미지 업로드 -->
	<insert id="insertProductImg" parameterType="hashmap">
		INSERT INTO T1_PRODUCT_IMG(PRODUCT_NAME, PRODUCT_IMG1, PRODUCT_IMG2, PRODUCT_IMG3)
		VALUES
			(#{pName}, #{path1}, #{path2}, #{path3})
	</insert>
	
	<!-- 브랜드 조회 -->
	<select id="selectBrand" resultType="com.example.sample1.model.Product">
		SELECT *
		FROM T1_PRODUCT_BRAND
	</select>
	
	<!-- 브랜드 이름 직접입력 -->
	<insert id="insertBrand" parameterType="hashmap">
		INSERT INTO T1_PRODUCT_BRAND(BRAND_NAME)
		VALUES (#{brandName})
	</insert><!-- 여기까지 지우면 됨 -->
	
	<!-- 상품 상세정보 -->
	<select id="selectProductInfo" parameterType="hashmap"
		resultType="com.example.sample1.model.Product">
		SELECT * FROM T1_PRODUCT_UPDATE U 
		INNER JOIN T1_PRODUCT_BRAND B
		ON U.PRODUCT_BRAND = B.PRODUCT_BRAND
		WHERE U.PRODUCT_SELL_NUMBER = #{proNum}	
	</select>
	
	<!-- 즉시  판매가 -->
	<select id="selectSellMinPrice" parameterType="hashmap"
		resultType="com.example.sample1.model.Product">
		SELECT MIN(PRODUCT_PRICE) AS SELLMINPRICE
		FROM T1_PRODUCT_UPDATE 
		WHERE PRODUCT_MODEL = #{modelNum} AND SELLBUY = 'B'
	</select>
	
	<!-- 즉시 구매가 -->
	<select id="selectBuyMinPrice" parameterType="hashmap"
		resultType="com.example.sample1.model.Product">
		SELECT MIN(PRODUCT_PRICE) AS BUYMINPRICE
		FROM T1_PRODUCT_UPDATE 
		WHERE PRODUCT_MODEL = #{modelNum} AND SELLBUY = 'S'
	</select>
	
	
</mapper>